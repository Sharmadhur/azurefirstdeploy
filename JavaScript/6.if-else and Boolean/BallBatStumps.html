<!DOCTYPE html>
<html lang="en">
  <head>
    <title>__BALL_BAT_STUMPS__</title>
    <style>
      body {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h1>Bat Ball Stump Game</h1>


    <!-- Bat Button -->
    <button onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult('Bat', computerChoice);
    alertMessage('Bat',computerChoice,resultMsg);
    "
    >Bat</button>






    <!-- Ball Button -->
    <button onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult('Ball', computerChoice);
    alertMessage('Ball',computerChoice,resultMsg);
    "
    >Ball</button>





    <!-- Stump Button -->
    <button onclick="
    let computerChoice = generateComputerChoice();
    let resultMsg = getResult('Stump', computerChoice);
    alertMessage('Stump',computerChoice,resultMsg);
    "
    >Stump</button>


    <!-- Reset Button -->
    <button onclick="
      score.win = 0;
      score.lost = 0;
      score.tie = 0;
      localStorage.setItem('Score', JSON.stringify(score) );
      alert('Score reset successfully!! ');
    ">Reset Score</button>





    <script>

      // To reset score in BrowserStorage type: localStorage.clear() in console.

      //Collect score from Browser storage
      let scoreStr = localStorage.getItem('Score');
      let score;  // Declaring score object.

      
      if(scoreStr !== null){  // storage is not null.
        score = JSON.parse(scoreStr);
      }

      else{  // storage is null.
        score = {
        win:0,
        lost:0,
        tie:0,
        };
      }

      

      score.displayScore = function(){
          return  `Won:${score.win}, Lost:${score.lost}, Tie:${score.tie}`;
      }




      let compChoice;

      function generateComputerChoice() {
        // This will generate random number between 0 and 3.
        let randomNumber = Math.random() * 3;

        if (randomNumber > 0 && randomNumber <= 1) {
          compChoice = "Bat";
        } else if (randomNumber > 1 && randomNumber <= 2) {
          compChoice = "Ball";
        } else {
          compChoice = "Stump";
        }

        return compChoice;
      }



      function getResult(userMove, computerMove){
        let result;

        if( userMove === computerMove ){
          result = 'Game tied !!!';
          score.tie += 1;
        }


        else if(userMove === 'Ball'){
          if( computerMove === 'Bat'){
            result = 'Computer Won !!';
            score.lost += 1;
          }
          else{
            result = 'User Won !!!';
            score.win += 1;
          }
        }

        else if( userMove === 'Bat'){
          if( computerMove === 'Ball'){
            result = 'User Won !!!';
            score.win += 1;
          }
          else{
            result = 'Computer Won !!!';
            score.lost += 1;
          }
        }

        else if( userMove === 'Stump' ){
          if( computerMove === 'Ball'){
            result = 'Computer Won !!!';
            score.lost += 1;
          }
          else{
            result = 'User Won !!!';
            score.win += 1;
          }
        }

        return result;

      }


      function alertMessage(userMove, computerMove, resultMsg){

        //Storing in local storage
        localStorage.setItem( 'Score', JSON.stringify(score));

        alert(`You have chosen ${userMove}. Computer choice is ${computerMove} and ${resultMsg}.
        ${score.displayScore()}`);


      }


    </script>
  </body>
</html>
